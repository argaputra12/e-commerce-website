{"version":3,"file":"static/js/298.619f942a.chunk.js","mappings":"8PAWMA,EAAgB,CAAC,OAAQ,UAAW,uBAyI1C,UAvI2B,WACzB,IAAQC,GAAOC,EAAAA,EAAAA,MAAPD,GACR,GAAgCE,EAAAA,EAAAA,UAAS,IAAG,eAArCC,EAAQ,KAAEC,EAAW,KAC5B,GAAwCF,EAAAA,EAAAA,UAAS,IAAG,eAA7CG,EAAY,KAAEC,EAAe,KAC9BC,GAAWC,EAAAA,EAAAA,MACXC,GAAcC,EAAAA,EAAAA,kBAEdC,GAAiBC,EAAAA,EAAAA,cACrB,SAACC,GAAsD,OACrDC,EAAAA,GAAAA,eAA+BD,EAAUb,GAAI,CAC3Ce,MAAOF,EAAUE,MACjBC,KAAMH,EAAUG,MAChB,GACJ,CACEC,UAAW,SAACC,GACVC,EAAAA,GAAAA,QAAcD,EAAKE,SACnBX,EAAYY,kBAAkB,cAAcC,OAAM,SAACC,GACjDC,QAAQC,IAAIF,EACd,GACF,EACAG,QAAS,SAACC,GACRR,EAAAA,GAAAA,MAAYQ,EAAMC,KAAKR,QACzB,IAIES,GAAgBC,EAAAA,EAAAA,UACpB,CAAC,WAAY9B,IACb,kBAAMc,EAAAA,GAAAA,kBAAkCd,EAAa,GACrD,CACE+B,sBAAsB,EACtBd,UAAW,SAACC,GACVd,EAAYc,EAAKH,OACjBT,EAAgBY,EAAKF,KACvB,IAIEgB,GAAiBpB,EAAAA,EAAAA,cACrB,SAACZ,GAAU,OAAKc,EAAAA,GAAAA,eAA+Bd,EAAG,GAClD,CACEiB,UAAW,SAACC,GACVC,EAAAA,GAAAA,QAAcD,EAAKE,SACnBX,EAAYY,kBAAkB,cAAcC,OAAM,SAACC,GACjDC,QAAQC,IAAIF,EACd,IACAhB,EAAS,oBACX,EACAmB,QAAS,SAACC,GACRR,EAAAA,GAAAA,MAAaQ,EAAmBC,KAAKR,QACvC,IAIEa,GAAkBH,EAAAA,EAAAA,UACtB,cACA,kBAAMhB,EAAAA,GAAAA,aAA6B,GACnC,CACEoB,UAAWC,MAIf,GACEN,EAAcO,gBACPC,IAAPrC,GACAiC,EAAgBG,UAEhB,OAAO,wCAGT,IAAME,EAAY,yCAAG,WAAOC,GAAmC,sEAC7DA,EAAEC,iBACF7B,EAAe8B,OAAO,CAAEzC,GAAAA,EAAIe,MAAOZ,EAAUa,KAAMX,IAAgB,2CACpE,gBAHiB,sCAKlB,OACE,iCACE,eAAIqC,UAAU,8BAA6B,8BAC3C,gBAAKA,UAAU,aAAY,UACzB,UAAC,KAAI,CACHC,GAAG,oBACHD,UAAU,mCAAkC,WAE5C,SAAC,MAAoB,CAACA,UAAU,YAAY,gBAIhD,kBACEA,UAAU,oFACVE,SAAUN,EAAa,WAEvB,iBAAKI,UAAU,GAAE,WACf,kBAAOG,QAAQ,gBAAgBH,UAAU,UAAS,6BAGlD,SAAC,IAAK,CACJI,KAAK,gBACL9B,KAAK,OACL+B,WAAW,mBACXC,OAAO,2BACPC,MAAO9C,EACP+C,SAAU,SAACX,GAAC,OAAKnC,EAAamC,EAAEY,OAA4BF,MAAM,EAClEG,UAAQ,QAGZ,iBAAKV,UAAU,GAAE,WACf,gBAAKA,UAAU,eAAc,4BAC7B,SAAC,IAAQ,CACPW,SAAUhD,EACViD,YAAahD,EACbiD,MAAM,OACNC,QAASzD,QAGb,iBAAK2C,UAAU,kCAAiC,WAC9C,mBACE1B,KAAK,SACLyC,QAAS,kBAAMzB,EAAeS,OAAOzC,EAAG,EACxC0C,UAAU,6HACV,aAAW,kBAAiB,8BAI9B,SAAC,IAAM,CACL1B,KAAK,SACLiC,MAAM,kBACNF,WAAW,gCACXW,KAAK,eAMjB,C","sources":["components/admin/Category.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { HiOutlineChevronLeft } from 'react-icons/hi';\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nimport { ApiError, CategoryService } from '../../api';\nimport Button from '../button/Button';\nimport Dropdown from '../input/Dropdown';\nimport Input from '../input/Input';\n\nconst categoryTypes = ['tops', 'bottoms', 'shoes & accessories'];\n\nconst Category: React.FC = () => {\n  const { id } = useParams();\n  const [category, setCategory] = useState('');\n  const [categoryType, setCategoryType] = useState('');\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n\n  const updateCategory = useMutation(\n    (variables: { id: string; title: string; type: string }) =>\n      CategoryService.updateCategory(variables.id, {\n        title: variables.title,\n        type: variables.type,\n      }),\n    {\n      onSuccess: (data) => {\n        toast.success(data.message);\n        queryClient.invalidateQueries('categories').catch((err) => {\n          console.log(err);\n        });\n      },\n      onError: (error: ApiError) => {\n        toast.error(error.body.message);\n      },\n    }\n  );\n\n  const fetchCategory = useQuery(\n    ['category', id],\n    () => CategoryService.getDetailCategory(id as string),\n    {\n      refetchOnWindowFocus: false,\n      onSuccess: (data) => {\n        setCategory(data.title);\n        setCategoryType(data.type);\n      },\n    }\n  );\n\n  const deleteCategory = useMutation(\n    (id: string) => CategoryService.deleteCategory(id),\n    {\n      onSuccess: (data) => {\n        toast.success(data.message);\n        queryClient.invalidateQueries('categories').catch((err) => {\n          console.log(err);\n        });\n        navigate('/admin/categories');\n      },\n      onError: (error) => {\n        toast.error((error as ApiError).body.message);\n      },\n    }\n  );\n\n  const fetchCategories = useQuery(\n    'categories',\n    () => CategoryService.getCategory(),\n    {\n      staleTime: Infinity,\n    }\n  );\n\n  if (\n    fetchCategory.isLoading ||\n    id === undefined ||\n    fetchCategories.isLoading\n  ) {\n    return <div>Loading...</div>;\n  }\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    updateCategory.mutate({ id, title: category, type: categoryType });\n  };\n\n  return (\n    <>\n      <h2 className=\"w-full text-2xl font-medium\">Update Category</h2>\n      <div className=\"flex py-3 \">\n        <Link\n          to=\"/admin/categories\"\n          className=\"flex place-items-center  gap-x-2\"\n        >\n          <HiOutlineChevronLeft className=\"text-xl\" />\n          Go Back\n        </Link>\n      </div>\n      <form\n        className=\"information flex min-h-[32rem] w-full flex-col gap-y-4 py-4 text-lg text-gray-700\"\n        onSubmit={handleSubmit}\n      >\n        <div className=\"\">\n          <label htmlFor=\"categoryTitle\" className=\"text-lg\">\n            Category Title\n          </label>\n          <Input\n            name=\"categoryTitle\"\n            type=\"text\"\n            extraClass=\"w-full mt-1 mb-2\"\n            border=\"border-2 border-gray-400\"\n            value={category}\n            onChange={(e) => setCategory((e.target as HTMLInputElement).value)}\n            required\n          />\n        </div>\n        <div className=\"\">\n          <div className=\"mb-2 text-lg\">Category Type</div>\n          <Dropdown\n            selected={categoryType}\n            setSelected={setCategoryType}\n            width=\"w-64\"\n            options={categoryTypes}\n          />\n        </div>\n        <div className=\"mt-8 flex place-content-between\">\n          <button\n            type=\"button\"\n            onClick={() => deleteCategory.mutate(id)}\n            className=\"mb-4 w-52 border border-gray-500 py-3 px-6 text-center text-xl hover:bg-gray-500  hover:text-gray-100 sm:py-2 sm:text-base\"\n            aria-label=\"Delete Category\"\n          >\n            Delete Category\n          </button>\n          <Button\n            type=\"submit\"\n            value=\"Update Category\"\n            extraClass=\"w-52 text-center text-xl mb-4\"\n            size=\"lg\"\n          />\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default Category;\n"],"names":["categoryTypes","id","useParams","useState","category","setCategory","categoryType","setCategoryType","navigate","useNavigate","queryClient","useQueryClient","updateCategory","useMutation","variables","CategoryService","title","type","onSuccess","data","toast","message","invalidateQueries","catch","err","console","log","onError","error","body","fetchCategory","useQuery","refetchOnWindowFocus","deleteCategory","fetchCategories","staleTime","Infinity","isLoading","undefined","handleSubmit","e","preventDefault","mutate","className","to","onSubmit","htmlFor","name","extraClass","border","value","onChange","target","required","selected","setSelected","width","options","onClick","size"],"sourceRoot":""}