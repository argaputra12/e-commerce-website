"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[983],{7983:function(e,t,r){r.r(t);var n=r(1413),a=r(4165),s=r(5861),l=r(885),i=r(2791),c=r(8617),o=r(71),u=r(1933),d=r(7689),m=r(1087),x=r(9085),p=r(8267),g=r(2208),b=r(2636),f=r(2203),h=r(2408),j=r(2824),v=r(184),y=function(e){var t=e.initialImage,r=e.setImage,a=e.file,s=e.setFile,l=(0,i.useCallback)((function(e){var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));s(t[0])}),[s]),c=(0,p.uI)({onDrop:l,accept:{"image/jpeg":[],"image/jpg":[],"image/png":[],"image/webp":[],"image/gif":[]}}),u=c.getRootProps,d=c.getInputProps,m=c.isDragActive,x=c.isDragAccept,g=c.isDragReject;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"mb-4 flex flex-wrap gap-x-2",children:[!a.name&&(0,v.jsxs)("button",{type:"button",className:"group relative h-40 w-52 cursor-pointer overflow-hidden rounded border-2  border-gray-100",onClick:function(){r("")},children:[(0,v.jsx)("img",{src:t,alt:"",className:"rounded-md object-contain"}),(0,v.jsx)("div",{className:"group absolute inset-0 hidden h-full  w-full place-content-center place-items-center bg-gray-100 opacity-50 group-hover:flex",children:(0,v.jsx)(o.bjh,{className:"animate-spin-fast-once text-7xl text-black "})})]}),a.name&&(0,v.jsxs)("button",{type:"button",className:"group relative h-40 w-52 cursor-pointer overflow-hidden rounded border-2 border-gray-100",onClick:function(){s(new File([],""))},children:[(0,v.jsx)("img",{alt:a.name,src:a.preview,className:"rounded-md object-contain",onLoad:function(){URL.revokeObjectURL(a.preview)}}),(0,v.jsx)("div",{className:"group absolute inset-0 hidden h-full  w-full place-content-center place-items-center bg-gray-100 opacity-50 group-hover:flex",children:(0,v.jsx)(o.bjh,{className:"animate-spin-fast-once text-7xl text-black "})})]},a.name)]}),(0,v.jsxs)("div",(0,n.Z)((0,n.Z)({},u()),{},{className:"".concat(m&&"bg-gray-100"," ").concat(g&&"bg-red-100"," ").concat(x&&"bg-green-100"," gap-y flex h-[10rem] w-full cursor-pointer flex-col place-content-center place-items-center border-2 border-dashed border-gray-300 text-xl font-bold"),children:[(0,v.jsx)("input",(0,n.Z)({},d())),g?(0,v.jsx)("p",{children:"Unsupported file type..."}):m?(0,v.jsx)("p",{children:"Drop the files here ..."}):(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("p",{children:"Drag 'n' drop some files here, or click here to select files"})}),(0,v.jsx)("p",{className:"text-lg text-gray-300",children:"Only *jpg *.jpeg *.png and *.webp images will be accepted"})]}))]})};t.default=function(){var e=(0,d.UO)().id,t=(0,d.s0)(),r=(0,u.useQueryClient)(),n=(0,i.useState)(""),o=(0,l.Z)(n,2),p=o[0],w=o[1],N=(0,i.useState)(""),k=(0,l.Z)(N,2),Z=k[0],C=k[1],D=(0,i.useState)(""),F=(0,l.Z)(D,2),S=F[0],U=F[1],B=(0,i.useState)(""),Q=(0,l.Z)(B,2),_=Q[0],L=Q[1],P=(0,i.useState)(new File([],"")),I=(0,l.Z)(P,2),O=I[0],R=I[1],A=(0,u.useMutation)((function(t){return g.QD.updateBanner({id:e,title:t.title,url_path:t.url_path,text_position:t.text_position,image:t.image})}),{onSuccess:function(e){x.Am.success(e.message),r.invalidateQueries("banners"),t("/admin/banners")}}),q=(0,u.useQuery)(["banner",e],(function(){return g.QD.getBanner(e)}),{refetchOnWindowFocus:!1,onSuccess:function(e){w(e.title),C(e.url_path),U(e.text_position),L(e.image)}}),z=(0,u.useMutation)((function(e){return g.QD.deleteBanner(e)}),{onSuccess:function(e){x.Am.success(e.message),r.invalidateQueries("banners"),t("/admin/banners")},onError:function(e){x.Am.error(e.body.message)}});if(q.isLoading||!e)return(0,v.jsx)("div",{children:"Loading..."});var M=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!O.size){e.next=7;break}return e.next=4,(0,j.QF)(O);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=""===_?"delete":"";case 8:r=e.t0,A.mutate({title:p,url_path:Z,text_position:S,image:r});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{className:"w-full text-2xl font-medium",children:"Update Banner"}),(0,v.jsx)("div",{className:"flex py-3 ",children:(0,v.jsxs)(m.rU,{to:"/admin/banners",className:"flex place-items-center  gap-x-2",children:[(0,v.jsx)(c.PSe,{className:"text-xl"}),"Go Back"]})}),(0,v.jsxs)("form",{className:"information flex w-full flex-col gap-y-4 py-4 text-lg text-gray-700 ",onSubmit:M,children:[(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"name",className:"text-lg",children:"Name"}),(0,v.jsx)(h.Z,{name:"name",type:"text",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:p,onChange:function(e){return w(e.target.value)},required:!0})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"urlPath",className:"text-lg",children:"Url Path"}),(0,v.jsx)(h.Z,{name:"urlPath",type:"text",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:Z,onChange:function(e){return C(e.target.value)},required:!0})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("div",{className:"mb-2 text-lg",children:"Text Position"}),(0,v.jsx)(f.Z,{selected:S,setSelected:U,width:"w-64",border:"border-2 border-gray-400",options:["left","right"]})]}),(0,v.jsx)("div",{className:" border-2 border-gray-400 p-4",children:(0,v.jsx)(y,{initialImage:_,setImage:L,file:O,setFile:R})}),(0,v.jsxs)("div",{className:"mt-8 flex place-content-between",children:[(0,v.jsx)("button",{type:"button",onClick:function(){return z.mutate(e)},className:"mb-4 w-52 border border-gray-500 py-3 px-6 text-center text-xl hover:bg-gray-500  hover:text-gray-100 sm:py-2 sm:text-base","aria-label":"Delete Banner",children:"Delete Banner"}),(0,v.jsx)(b.Z,{type:"submit",value:"Update Banner",extraClass:"w-52 text-center text-xl mb-4",size:"lg"})]})]})]})}}}]);
//# sourceMappingURL=983.48662533.chunk.js.map