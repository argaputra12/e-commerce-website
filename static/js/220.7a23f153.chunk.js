"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[220],{6220:function(e,t,r){r.r(t);var n=r(1413),a=r(2982),s=r(4165),i=r(5861),l=r(885),c=r(2791),o=r(8617),u=r(1933),d=r(7689),m=r(1087),x=r(9085),p=r(2208),g=r(2636),b=r(2203),f=r(2408),h=r(2824),j=r(4428),v=r(184);t.default=function(){var e=(0,d.s0)(),t=(0,u.useQueryClient)(),r=(0,c.useState)(""),y=(0,l.Z)(r,2),w=y[0],N=y[1],Z=(0,c.useState)(""),C=(0,l.Z)(Z,2),k=C[0],S=C[1],q=(0,c.useState)(""),z=(0,l.Z)(q,2),F=z[0],P=z[1],D=(0,c.useState)(0),L=(0,l.Z)(D,2),I=L[0],R=L[1],U=(0,c.useState)(""),A=(0,l.Z)(U,2),O=A[0],Q=A[1],M=(0,c.useState)("new"),X=(0,l.Z)(M,2),B=X[0],E=X[1],_=(0,c.useState)([{size:"L",quantity:0},{size:"M",quantity:0},{size:"S",quantity:0},{size:"XL",quantity:0},{size:"XXL",quantity:0}]),G=(0,l.Z)(_,2),H=G[0],T=G[1],W=(0,c.useState)([]),J=(0,l.Z)(W,2),K=J[0],V=J[1],Y=(0,c.useState)([]),$=(0,l.Z)(Y,2),ee=$[0],te=$[1],re=(0,c.useState)([]),ne=(0,l.Z)(re,2),ae=ne[0],se=ne[1],ie=(0,u.useMutation)((function(e){return p.M5.createProduct({title:e.title,brand:e.brand,product_detail:e.detail,images:e.images,price:e.price,category_id:e.category,condition:e.condition,stock:e.stock})}));(0,u.useQuery)("categories",(function(){return p.HE.getCategory()}),{refetchOnWindowFocus:!1,onSuccess:function(e){Q(e.data[0].title),V(e.data.map((function(e){return{id:e.id,title:e.title}})))}});var le=function(){var r=(0,i.Z)((0,s.Z)().mark((function r(n){var l,c,o;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.next=3,Promise.all(ae.map(function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.QF)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:l=r.sent,c=[].concat((0,a.Z)(ee),(0,a.Z)(l)),o=K.find((function(e){return e.title===O})),ie.mutate({title:w,brand:k,detail:F,price:I,category:null===o||void 0===o?void 0:o.id,condition:B,stock:H,images:c},{onSuccess:function(r){x.Am.success(r.message),t.invalidateQueries("products"),e("/admin/products")},onError:function(e){x.Am.error(e.body.message)}});case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{className:"w-full text-2xl font-medium",children:"Create Product"}),(0,v.jsx)("div",{className:"flex py-3 ",children:(0,v.jsxs)(m.rU,{to:"/admin/products",className:"flex place-items-center  gap-x-2",children:[(0,v.jsx)(o.PSe,{className:"text-xl"}),"Go Back"]})}),(0,v.jsxs)("form",{className:"information flex w-full flex-col gap-y-4 py-4 text-lg text-gray-700 ",onSubmit:le,children:[(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"name",className:"text-lg",children:"Name"}),(0,v.jsx)(f.Z,{name:"name",type:"text",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:w,onChange:function(e){return N(e.target.value)},required:!0})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"brand",className:"text-lg",children:"Brand"}),(0,v.jsx)(f.Z,{name:"brand",type:"text",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:k,onChange:function(e){return S(e.target.value)},required:!0})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"address",className:"text-lg",children:"Product Detail"}),(0,v.jsx)("textarea",{"aria-label":"Address",className:"mt-1 mb-2 w-full border-2 border-gray-400 p-4 outline-none",rows:4,value:F,onChange:function(e){return P(e.target.value)},required:!0}),(0,v.jsxs)("div",{className:"flex flex-wrap place-content-between gap-x-4",children:[(0,v.jsxs)("div",{className:"w-full min-w-[10rem] flex-1",children:[(0,v.jsx)("div",{className:"mb-1 text-lg",children:"Price"}),(0,v.jsx)(f.Z,{name:"price",type:"number",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:I.toString(),onChange:function(e){return R(Number(e.target.value))},required:!0})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("div",{className:"mb-2 text-lg",children:"Category Type"}),(0,v.jsx)(b.Z,{selected:O,setSelected:Q,width:"w-64",border:"border-2 border-gray-400",options:K.map((function(e){return e.title}))})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("div",{className:"mb-2 text-lg",children:"Condition"}),(0,v.jsx)(b.Z,{selected:B,setSelected:E,width:"w-64",border:"border-2 border-gray-400",options:["new","used"]})]})]}),(0,v.jsx)("div",{className:"my-4 flex flex-wrap gap-x-4",children:H.map((function(e){return(0,v.jsxs)("div",{className:"min-w-[10rem] flex-1",children:[(0,v.jsxs)("label",{htmlFor:"stock",className:"text-lg",children:["Size ",e.size]}),(0,v.jsx)(f.Z,{name:"stock",type:"text",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:e.quantity.toString(),onChange:function(t){return T((function(r){return r.map((function(r){return r.size===e.size?(0,n.Z)((0,n.Z)({},r),{},{quantity:Number(t.target.value)}):r}))}))},required:!0})]},e.size)}))})]}),(0,v.jsx)("div",{className:" border-2 border-gray-400 p-4",children:(0,v.jsx)(j.Z,{initialImages:ee,setImages:te,files:ae,setFiles:se})}),(0,v.jsxs)("div",{className:"mt-8 flex place-content-between",children:[(0,v.jsx)("button",{type:"button",onClick:function(){return e("/admin/products")},className:"mb-4 w-52 border border-gray-500 py-3 px-6 text-center text-xl hover:bg-gray-500  hover:text-gray-100 sm:py-2 sm:text-base","aria-label":"Cancel",children:"Cancel"}),(0,v.jsx)(g.Z,{type:"submit",value:"Create Product",extraClass:"w-52 text-center text-xl mb-4",size:"lg"})]})]})]})}},4428:function(e,t,r){var n=r(1413),a=r(2982),s=r(2791),i=r(8267),l=r(71),c=r(184);t.Z=function(e){var t=e.initialImages,r=e.setImages,o=e.files,u=e.setFiles,d=(0,s.useCallback)((function(e){var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));u((function(e){return[].concat((0,a.Z)(e),(0,a.Z)(t))}))}),[u]),m=(0,i.uI)({onDrop:d,accept:{"image/jpeg":[],"image/jpg":[],"image/png":[],"image/webp":[],"image/gif":[]}}),x=m.getRootProps,p=m.getInputProps,g=m.isDragActive,b=m.isDragAccept,f=m.isDragReject;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"mb-4 flex flex-wrap gap-x-2",children:[t.map((function(e,n){return(0,c.jsxs)("button",{type:"button",className:"group relative h-52 w-40 cursor-pointer overflow-hidden rounded border-2  border-gray-100",onClick:function(){r(t.filter((function(t){return t!==e})))},children:[(0,c.jsx)("img",{src:e,alt:"",className:"rounded-md object-contain object-bottom"}),(0,c.jsx)("div",{className:"group absolute inset-0 hidden h-full  w-full place-content-center place-items-center bg-gray-100 opacity-50 group-hover:flex",children:(0,c.jsx)(l.bjh,{className:"animate-spin-fast-once text-7xl text-black "})})]},n)})),o.map((function(e){return(0,c.jsxs)("button",{type:"button",className:"group relative h-52 w-40 cursor-pointer overflow-hidden rounded border-2 border-gray-100",onClick:function(){u(o.filter((function(t){return t.name!==e.name})))},children:[(0,c.jsx)("img",{alt:e.name,src:e.preview,className:"rounded-md object-contain object-bottom",onLoad:function(){URL.revokeObjectURL(e.preview)}}),(0,c.jsx)("div",{className:"group absolute inset-0 hidden h-full  w-full place-content-center place-items-center bg-gray-100 opacity-50 group-hover:flex",children:(0,c.jsx)(l.bjh,{className:"animate-spin-fast-once text-7xl text-black "})})]},e.name)}))]}),(0,c.jsxs)("div",(0,n.Z)((0,n.Z)({},x()),{},{className:"".concat(g&&"bg-gray-100"," ").concat(f&&"bg-red-100"," ").concat(b&&"bg-green-100"," gap-y flex h-[10rem] w-full cursor-pointer flex-col place-content-center place-items-center border-2 border-dashed border-gray-300 text-xl font-bold"),children:[(0,c.jsx)("input",(0,n.Z)({},p())),f?(0,c.jsx)("p",{children:"Unsupported file type..."}):g?(0,c.jsx)("p",{children:"Drop the files here ..."}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("p",{children:"Drag 'n' drop some files here, or click here to select files"})}),(0,c.jsx)("p",{className:"text-lg text-gray-300",children:"Only *jpg *.jpeg *.png and *.webp images will be accepted"})]}))]})}}}]);
//# sourceMappingURL=220.7a23f153.chunk.js.map