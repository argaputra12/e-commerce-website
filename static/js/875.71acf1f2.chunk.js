"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[875],{7875:function(e,t,r){r.r(t);var n=r(1413),a=r(4165),c=r(5861),s=r(2982),o=r(885),i=r(2791),l=r(8267),u=r(8820),d=r(1933),f=r(9085),m=r(2208),g=r(2824),p=r(3638),x=r(184),h=function(){var e=(0,p.R)(),t=e.setSearch,r=e.setSearchImage,h=(e.searchImage,(0,i.useRef)(0)),b=(0,i.useState)(!1),j=(0,o.Z)(b,2),v=j[0],w=j[1],y=(0,i.useState)(""),N=(0,o.Z)(y,2),Z=N[0],R=N[1],k=(0,i.useRef)(0),I=(0,d.useMutation)((function(e){return m.oD.searchImage({base64_image:e.base64_image})}),{onMutate:function(){w(!0)},onSuccess:function(e,n){h.current--,r((function(t){return[].concat((0,s.Z)(t),[{category:e.title,file:n.imageFile}])})),0===h.current&&(t(!1),w(!1))},onError:function(e){f.Am.error(e.body.message),w(!1)}}),D=(0,d.useQuery)("showerThought",(function(){return m.oD.showerThoughts()}),{staleTime:1/0,onSuccess:function(e){R(e.data[k.current]),k.current++}});(0,i.useEffect)((function(){var e=setInterval((function(){var e,t;null!=D.data&&(k.current===(null===(e=D.data)||void 0===e?void 0:e.data.length)&&(k.current=0),R(null===(t=D.data)||void 0===t?void 0:t.data[k.current]),k.current++)}),8e3);return function(){return clearInterval(e)}}),[D.data]);var S=(0,i.useCallback)(function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.current=t.length,r([]),t.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})).forEach(function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.QF)(t);case 2:r=e.sent,I.mutate({base64_image:r,imageFile:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[I]),L=(0,l.uI)({onDrop:S,disabled:v,accept:{"image/jpeg":[],"image/jpg":[],"image/png":[],"image/webp":[],"image/gif":[]}}),U=L.getRootProps,F=L.getInputProps,O=L.isDragActive,T=L.isDragAccept,A=L.isDragReject;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",(0,n.Z)((0,n.Z)({},U()),{},{className:"".concat(O&&"bg-gray-100"," ").concat(A&&"bg-red-100"," ").concat(T&&"bg-green-100"," ").concat(v&&"cursor-not-allowed bg-gray-100","\n          gap-y flex h-[12rem] w-full cursor-pointer flex-col place-content-center place-items-center rounded-b-lg border-2 border-dashed border-gray-300 text-xl font-bold"),children:[(0,x.jsx)("input",(0,n.Z)({},F())),v?(0,x.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,x.jsx)("p",{className:"",children:"Processing Your Image"}),(0,x.jsx)(u.Z7b,{className:"my-3 animate-spin-slow text-5xl text-gray-300"})]}):A?(0,x.jsx)("p",{children:"Unsupported file type..."}):O?(0,x.jsx)("p",{children:"Drop the files here ..."}):(0,x.jsx)("p",{children:"Drag 'n' drop some files here, or click here to select files"}),v?(0,x.jsxs)("p",{className:" px-[10%] text-center text-base text-gray-400",children:[Z," "]}):(0,x.jsx)("p",{className:"text-lg text-gray-300",children:"Only *jpg *.jpeg *.png and *.webp images will be accepted"})]}))})};t.default=function(){var e=(0,p.R)().searchImage;return(0,x.jsxs)("main",{id:"main-content",className:"relative mx-auto mt-20 min-h-screen w-[95vw] overflow-hidden  border-t border-gray-100 2xl:w-[90rem]",children:[(0,x.jsx)("div",{className:"w-full ",children:(0,x.jsx)("h1",{className:"mt-6 mb-2 text-center text-2xl sm:text-left sm:text-4xl",children:"Model Test"})}),(0,x.jsxs)("div",{className:"mt-4 flex gap-y-4 flex-col w-full",children:[(0,x.jsx)("section",{className:"\n          ".concat(e.length>0&&"border-[1.5px] border-gray-500","\n          flex flex-wrap gap-4  py-2 px-5 font-medium text-gray-400 w-fit"),children:e.map((function(e,t){return(0,x.jsxs)("div",{className:"flex flex-col place-content-center",children:[(0,x.jsx)("img",{src:e.file.preview,className:"w-40 h-40 rounded-md border-2  border-gray-100  object-contain object-bottom",onLoad:function(){URL.revokeObjectURL(e.file.preview)}}),(0,x.jsx)("h1",{className:"text-lg font-medium text-center",children:e.category})]},t)}))}),(0,x.jsx)("section",{children:(0,x.jsx)(h,{})})]})]})}}}]);
//# sourceMappingURL=875.71acf1f2.chunk.js.map