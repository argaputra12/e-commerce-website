"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[831],{831:function(e,a,r){r.r(a),r.d(a,{default:function(){return y}});var t=r(4165),n=r(5861),s=r(885),l=r(2791),o=r(1933),u=r(9085),c=r(2208),i=r(2636),d=r(184),m=function(e){var a=e.type,r=void 0===a?"text":a,t=e.name,n=e.placeholder,s=e.extraClass,l=e.required,o=void 0!==l&&l,u=(e.border,e.label),c=void 0===u?"":u,i=e.onChange,m=e.value,x=e.readOnly,f=void 0!==x&&x;return(0,d.jsxs)("fieldset",{className:"".concat(f?"":"focus-within:border-gray-700"," w-full border border-gray-300 pb-2 "),children:[(0,d.jsx)("legend",{className:"ml-2 pr-2 pl-1 font-semibold",children:c}),(0,d.jsx)("input",{type:r,name:t,placeholder:n,required:o,onChange:i,value:m,"aria-label":c,className:"w-full  pl-6 ".concat(s),readOnly:f})]})},x=r(71),f=r(1460),p=r(8572),h=r(2408),b=function(e){var a=e.closeModal,r=(0,l.useState)(""),m=(0,s.Z)(r,2),x=m[0],f=m[1],b=(0,l.useState)(""),g=(0,s.Z)(b,2),v=g[0],y=g[1],w=(0,l.useState)(""),j=(0,s.Z)(w,2),N=j[0],C=j[1],Z=(0,o.useMutation)((function(e){return c.$h.changePassword({old_password:e.currentPassword,new_password:e.newPassword})}),{onSuccess:function(e){u.Am.success(e.message),a()},onError:function(e){C(e.body.message)}}),S=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),Z.mutate({currentPassword:x,newPassword:v});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p.V.Title,{as:"h3",className:"my-8 text-center text-4xl font-medium leading-6 text-gray-800",children:"Change Password"}),(0,d.jsxs)("form",{onSubmit:S,className:"mt-2",children:[(0,d.jsx)(h.Z,{type:"password",placeholder:"Current Password *",name:"password",required:!0,extraClass:"w-full focus:border-gray-500 mb-4 ".concat(N?"border-red-300":""),border:"border-2 border-gray-300 mb-4",onChange:function(e){return f(e.target.value)},value:x}),(0,d.jsx)(h.Z,{type:"password",placeholder:"New Password *",name:"password",required:!0,extraClass:"w-full focus:border-gray-500 mb-4 ".concat(N?"border-red-300":""),border:"border-2 border-gray-300",onChange:function(e){return y(e.target.value)},value:v}),""!==N&&(0,d.jsx)("div",{className:"mb-4 whitespace-nowrap text-sm text-red-600",children:N}),(0,d.jsx)(i.Z,{type:"submit",value:"Change Password",extraClass:"w-full text-center text-xl mb-4",size:"lg"})]})]})},g=function(e){var a=e.closeModal,r=(0,l.useState)(0),m=(0,s.Z)(r,2),x=m[0],f=m[1],b=(0,l.useState)(""),g=(0,s.Z)(b,2),v=g[0],y=g[1],w=(0,o.useMutation)((function(e){return c.KD.updateUserBalance({balance:e.balance})}),{onSuccess:function(e){u.Am.success(e.message),a()},onError:function(e){y(e.body.message)}}),j=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),w.mutate({balance:x});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p.V.Title,{as:"h3",className:"my-8 text-center text-4xl font-medium leading-6 text-gray-800",children:"Top Up Balance"}),(0,d.jsxs)("form",{onSubmit:j,className:"mt-2",children:[(0,d.jsx)(h.Z,{type:"number",placeholder:"Amount *",name:"amount",required:!0,extraClass:"w-full focus:border-gray-500 mb-4 ".concat(v?"border-red-300":""),border:"border-2 border-gray-300 mb-4",onChange:function(e){return f(Number(e.target.value))},value:x.toString()}),""!==v&&(0,d.jsx)("div",{className:"mb-4 whitespace-nowrap text-sm text-red-600",children:v}),(0,d.jsx)(i.Z,{type:"submit",value:"Top Up",extraClass:"w-full text-center text-xl mb-4",size:"lg"})]})]})},v=function(e){var a=e.buttonText,r=e.refetch,t=(0,l.useState)(!1),n=(0,s.Z)(t,2),o=n[0],u=n[1],c=(0,d.jsx)(d.Fragment,{}),i=function(){null!=r&&r(),u(!1)};return"Change Password"===a?c=(0,d.jsx)(b,{closeModal:i}):"Top Up"===a&&(c=(0,d.jsx)(g,{closeModal:i})),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:(0,d.jsx)("button",{onClick:function(){return u(!0)},className:" flex w-full cursor-pointer items-center justify-center border border-gray-300 py-2 px-4 hover:bg-gray-500 hover:text-gray-100 sm:w-52 ","aria-label":a,children:a})}),(0,d.jsx)(f.u,{show:o,as:l.Fragment,children:(0,d.jsx)(p.V,{as:"div",className:"fixed inset-0 z-[999] overflow-y-auto",static:!0,open:o,onClose:function(){return u(!1)},children:(0,d.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[(0,d.jsx)(f.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,d.jsx)(p.V.Overlay,{className:"fixed inset-0 bg-[rgba(107,114,128,0.4)]"})}),(0,d.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200b"}),(0,d.jsx)(f.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,d.jsxs)("div",{className:"relative my-8 inline-block w-full max-w-md transform overflow-hidden bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,d.jsx)("button",{type:"button",className:"absolute right-4 top-3 text-4xl outline-none focus:outline-none",onClick:function(){return u(!1)},children:(0,d.jsx)(x.IOM,{})}),c]})})]})})})]})},y=function(){var e,a,r,x=(0,l.useState)(""),f=(0,s.Z)(x,2),p=f[0],h=f[1],b=(0,l.useState)(""),g=(0,s.Z)(b,2),y=g[0],w=g[1],j=(0,l.useState)(""),N=(0,s.Z)(j,2),C=N[0],Z=N[1],S=(0,l.useState)(""),T=(0,s.Z)(S,2),F=T[0],P=T[1],k=(0,o.useQuery)("user",(function(){return c.KD.getUser()}),{staleTime:1/0});(0,l.useEffect)((function(){null!=k.data&&(h(k.data.address_name||""),w(k.data.phone_number||""),Z(k.data.address||""),P(k.data.city||""))}),[k.data]);var A=(0,o.useMutation)((function(e){return c.KD.updateUserShippingAddress({address_name:e.addressName,phone_number:e.phoneNumber,address:e.address,city:e.city})}),{onSuccess:function(e){u.Am.success(e.message)},onError:function(e){u.Am.error(e.body.message)}}),M=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(a){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),A.mutate({addressName:p,phoneNumber:y,address:C,city:F});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return k.isError?(0,d.jsx)("div",{children:"Error..."}):k.isLoading?(0,d.jsx)("div",{children:"Loading..."}):(0,d.jsxs)("div",{className:"pl-5 pt-3",children:[(0,d.jsx)("h2",{className:"w-full text-2xl font-medium",children:"General Information"}),(0,d.jsxs)("div",{className:"information flex w-full flex-col gap-y-4 py-4 text-lg text-gray-700",children:[(0,d.jsx)(m,{name:"name",label:"Full Name",value:null===(e=k.data)||void 0===e?void 0:e.name,readOnly:!0}),(0,d.jsx)(m,{name:"email",label:"Email",value:null===(a=k.data)||void 0===a?void 0:a.email,readOnly:!0}),(0,d.jsx)("div",{className:"flex place-content-end",children:(0,d.jsx)(v,{buttonText:"Change Password"})})]}),(0,d.jsx)("h2",{className:"w-full text-2xl font-medium",children:"Your Balance"}),(0,d.jsxs)("div",{className:"information flex w-full flex-col gap-y-4 py-4 text-lg text-gray-700",children:[(0,d.jsx)(m,{name:"balance",label:"Balance",type:"number",value:null===(r=k.data)||void 0===r?void 0:r.balance,readOnly:!0}),(0,d.jsx)("div",{className:"flex place-content-end",children:(0,d.jsx)(v,{buttonText:"Top Up",refetch:function(){k.refetch()}})})]}),(0,d.jsx)("h2",{className:"w-full text-2xl font-medium",children:"Your Address"}),(0,d.jsxs)("form",{className:"information flex w-full flex-col gap-y-4 py-4 text-lg text-gray-700 ",onSubmit:M,children:[(0,d.jsx)(m,{name:"address-name",label:"Address Name",value:p,onChange:function(e){return h(e.target.value)}}),(0,d.jsx)(m,{name:"phone-number",label:"Phone Number",value:y,onChange:function(e){return w(e.target.value)}}),(0,d.jsx)(m,{name:"address",label:"Address",value:C,onChange:function(e){return Z(e.target.value)}}),(0,d.jsx)(m,{name:"city",label:"City",value:F,onChange:function(e){return P(e.target.value)}}),(0,d.jsx)("div",{className:"mt-8 flex place-content-end",children:(0,d.jsx)(i.Z,{type:"submit",value:"Update Address",extraClass:"w-52 text-center text-xl mb-4",size:"lg"})})]})]})}}}]);
//# sourceMappingURL=831.0420d481.chunk.js.map