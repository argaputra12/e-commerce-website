"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[735],{4735:function(e,t,r){r.r(t);var n=r(1413),a=r(4165),c=r(5861),s=r(885),o=r(2791),l=r(8267),u=r(8820),i=r(1933),d=r(7689),x=r(9085),f=r(2208),g=r(3638),p=r(2824),h=r(184),m=function(){var e=(0,d.s0)(),t=(0,g.R)(),r=t.setSearch,m=t.setSearchImage,v=(0,o.useRef)(null),b=(0,o.useState)(!1),j=(0,s.Z)(b,2),w=j[0],y=j[1],N=(0,o.useState)(""),k=(0,s.Z)(N,2),Z=k[0],D=k[1],R=(0,o.useRef)(0),S=(0,i.useMutation)((function(e){return f.oD.searchImage({base64_image:e})}),{onMutate:function(){y(!0)},onSuccess:function(t){r(!1),m(new Array({file:v.current,category:t.title})),e("/products?category=".concat(t.id,"&searchImage=true"))},onError:function(e){x.Am.error(e.body.message),y(!1)}}),I=(0,i.useQuery)("showerThought",(function(){return f.oD.showerThoughts()}),{staleTime:1e4,onSuccess:function(e){D(e.data[R.current]),R.current++}});(0,o.useEffect)((function(){var e=setInterval((function(){var e,t;null!=I.data&&(R.current===(null===(e=I.data)||void 0===e?void 0:e.data.length)&&(R.current=0),D(null===(t=I.data)||void 0===t?void 0:t.data[R.current]),R.current++)}),8e3);return function(){return clearInterval(e)}}),[I.data]);var C=(0,o.useCallback)(function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})),e.next=3,(0,p.QF)(r[0]);case 3:n=e.sent,S.mutate(n),v.current=r[0];case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[S]),E=(0,l.uI)({onDrop:C,disabled:w,multiple:!1,accept:{"image/jpeg":[],"image/jpg":[],"image/png":[],"image/webp":[],"image/gif":[]}}),T=E.getRootProps,A=E.getInputProps,F=E.isDragActive,L=E.isDragAccept,O=E.isDragReject;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",(0,n.Z)((0,n.Z)({},T()),{},{className:"".concat(F&&"bg-gray-100"," ").concat(O&&"bg-red-100"," ").concat(L&&"bg-green-100"," ").concat(w&&"cursor-not-allowed bg-gray-100","\n          gap-y flex h-[12rem] w-full cursor-pointer flex-col place-content-center place-items-center rounded-b-lg border-2 border-dashed border-gray-300 text-xl font-bold"),children:[(0,h.jsx)("input",(0,n.Z)({},A())),w?(0,h.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,h.jsx)("p",{className:"",children:"Processing Your Image"}),(0,h.jsx)(u.Z7b,{className:"my-3 animate-spin-slow text-5xl text-gray-300"})]}):O?(0,h.jsx)("p",{children:"Unsupported file type..."}):F?(0,h.jsx)("p",{children:"Drop the files here ..."}):(0,h.jsx)("p",{children:"Drag 'n' drop some files here, or click here to select files"}),w?(0,h.jsxs)("p",{className:" px-[10%] text-center text-base text-gray-400",children:[Z," "]}):(0,h.jsx)("p",{className:"text-lg text-gray-300",children:"Only *jpg *.jpeg *.png and *.webp images will be accepted"})]}))})},v=function(e,t){(0,o.useEffect)((function(){function r(r){e.current&&!e.current.contains(r.target)&&t(!1)}return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}}),[e,t])};t.default=function(){var e=(0,g.R)(),t=e.search,r=e.setSearch,n=(0,d.s0)(),a=(0,o.useRef)(null);v(a,r);var c=(0,o.useState)(""),l=(0,s.Z)(c,2),x=l[0],p=l[1],b=(0,o.useState)(!1),j=(0,s.Z)(b,2),w=j[0],y=j[1],N=(0,i.useQuery)(["search",x],(function(){return f.oD.searchText(x)}),{enabled:x.length>0,staleTime:1/0}).data;return t?(0,h.jsx)("div",{className:"fixed top-0 z-[200]  h-screen w-screen  bg-[rgba(0,0,0,0.5)] px-2 pt-10",onKeyDown:function(e){"Escape"===e.key&&r(!1)},children:(0,h.jsxs)("div",{className:"mx-auto max-w-md overflow-hidden rounded-lg md:max-w-xl ",ref:a,children:[(0,h.jsx)("div",{className:"md:flex",children:(0,h.jsx)("div",{className:"w-full px-3",children:(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)(u.RB5,{className:"absolute top-4 left-4 text-2xl text-gray-400"}),(0,h.jsx)("input",{autoFocus:!0,type:"text",className:"h-14 w-full bg-white px-14 text-lg  hover:cursor-pointer focus:outline-none ".concat(null!==N&&void 0!==N&&N.length||w?"rounded-t-lg border-b-2 border-gray-300":"rounded-lg"),name:"search",placeholder:"Product Name Or Brand",value:x,onFocus:function(){y(!1)},onChange:function(e){return p(e.target.value)}}),(0,h.jsx)("span",{className:"absolute top-4 right-5 border-l pl-4",children:(0,h.jsx)(u.rJU,{onClick:function(){return y(!w)},className:"top-4 right-4 text-2xl text-gray-500 hover:cursor-pointer hover:text-green-500"})})]})})}),(0,h.jsx)("div",{className:"relative flex w-full flex-col px-3 ",children:(0,h.jsx)("div",{className:"flex flex-col rounded-b-lg  bg-white  text-gray-600",children:w?(0,h.jsx)(m,{}):null===N||void 0===N?void 0:N.map((function(e){return(0,h.jsx)("button",{onClick:function(){return t=e.id,r(!1),void n("/products/".concat(t));var t},className:"flex flex-col p-3 hover:bg-gray-100 hover:text-black",children:(0,h.jsx)("div",{className:"flex flex-row",children:e.title})},e.id)}))})})]})}):null}}}]);
//# sourceMappingURL=735.37dcd64e.chunk.js.map