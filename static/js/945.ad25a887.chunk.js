"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[945],{4428:function(e,t,r){var n=r(1413),a=r(2982),s=r(2791),c=r(8267),i=r(71),o=r(184);t.Z=function(e){var t=e.initialImages,r=e.setImages,l=e.files,u=e.setFiles,d=(0,s.useCallback)((function(e){var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));u((function(e){return[].concat((0,a.Z)(e),(0,a.Z)(t))}))}),[u]),m=(0,c.uI)({onDrop:d,accept:{"image/jpeg":[],"image/jpg":[],"image/png":[],"image/webp":[],"image/gif":[]}}),x=m.getRootProps,p=m.getInputProps,g=m.isDragActive,f=m.isDragAccept,b=m.isDragReject;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mb-4 flex flex-wrap gap-x-2",children:[t.map((function(e,n){return(0,o.jsxs)("button",{type:"button",className:"group relative h-52 w-40 cursor-pointer overflow-hidden rounded border-2  border-gray-100",onClick:function(){r(t.filter((function(t){return t!==e})))},children:[(0,o.jsx)("img",{src:e,alt:"",className:"rounded-md object-contain object-bottom"}),(0,o.jsx)("div",{className:"group absolute inset-0 hidden h-full  w-full place-content-center place-items-center bg-gray-100 opacity-50 group-hover:flex",children:(0,o.jsx)(i.bjh,{className:"animate-spin-fast-once text-7xl text-black "})})]},n)})),l.map((function(e){return(0,o.jsxs)("button",{type:"button",className:"group relative h-52 w-40 cursor-pointer overflow-hidden rounded border-2 border-gray-100",onClick:function(){u(l.filter((function(t){return t.name!==e.name})))},children:[(0,o.jsx)("img",{alt:e.name,src:e.preview,className:"rounded-md object-contain object-bottom",onLoad:function(){URL.revokeObjectURL(e.preview)}}),(0,o.jsx)("div",{className:"group absolute inset-0 hidden h-full  w-full place-content-center place-items-center bg-gray-100 opacity-50 group-hover:flex",children:(0,o.jsx)(i.bjh,{className:"animate-spin-fast-once text-7xl text-black "})})]},e.name)}))]}),(0,o.jsxs)("div",(0,n.Z)((0,n.Z)({},x()),{},{className:"".concat(g&&"bg-gray-100"," ").concat(b&&"bg-red-100"," ").concat(f&&"bg-green-100"," gap-y flex h-[10rem] w-full cursor-pointer flex-col place-content-center place-items-center border-2 border-dashed border-gray-300 text-xl font-bold"),children:[(0,o.jsx)("input",(0,n.Z)({},p())),b?(0,o.jsx)("p",{children:"Unsupported file type..."}):g?(0,o.jsx)("p",{children:"Drop the files here ..."}):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("p",{children:"Drag 'n' drop some files here, or click here to select files"})}),(0,o.jsx)("p",{className:"text-lg text-gray-300",children:"Only *jpg *.jpeg *.png and *.webp images will be accepted"})]}))]})}},945:function(e,t,r){r.r(t);var n=r(1413),a=r(2982),s=r(4165),c=r(5861),i=r(885),o=r(2791),l=r(8617),u=r(1933),d=r(7689),m=r(1087),x=r(9085),p=r(2208),g=r(2636),f=r(2203),b=r(2408),h=r(2824),j=r(4428),v=r(184);t.default=function(){var e=(0,d.UO)().id,t=(0,d.s0)(),r=(0,u.useQueryClient)(),y=(0,o.useState)(""),w=(0,i.Z)(y,2),N=w[0],Z=w[1],k=(0,o.useState)(""),S=(0,i.Z)(k,2),C=S[0],P=S[1],F=(0,o.useState)(""),D=(0,i.Z)(F,2),U=D[0],L=D[1],q=(0,o.useState)(0),A=(0,i.Z)(q,2),O=A[0],z=A[1],I=(0,o.useState)(""),R=(0,i.Z)(I,2),M=R[0],Q=R[1],_=(0,o.useState)(""),E=(0,i.Z)(_,2),B=E[0],W=E[1],G=(0,o.useState)([]),H=(0,i.Z)(G,2),T=H[0],J=H[1],K=(0,o.useState)([]),V=(0,i.Z)(K,2),X=V[0],Y=V[1],$=(0,o.useState)([]),ee=(0,i.Z)($,2),te=ee[0],re=ee[1],ne=(0,o.useState)([]),ae=(0,i.Z)(ne,2),se=ae[0],ce=ae[1],ie=(0,u.useMutation)((function(t){return p.M5.updateProduct({id:e,title:t.title,brand:t.brand,product_detail:t.detail,images:t.images,price:t.price,category_id:t.category,condition:t.condition,stock:t.stock})}),{onSuccess:function(){x.Am.success("Product updated")},onError:function(e){x.Am.error(e.body.message)}}),oe=(0,u.useQuery)(["product",e],(function(){return p.M5.getProduct(e)}),{refetchOnWindowFocus:!1,onSuccess:function(e){Z(e.title),P(e.brand),L(e.product_detail),z(e.price),Q(e.category_name),W(e.condition),J(e.stock),re(e.images)}}),le=(0,u.useQuery)("categories",(function(){return p.HE.getCategory()}),{refetchOnWindowFocus:!1,onSuccess:function(e){Y(e.data.map((function(e){return{id:e.id,title:e.title}})))}}),ue=(0,u.useMutation)((function(e){return p.M5.deleteProduct(e)}),{onSuccess:function(e){x.Am.success(e.message),r.invalidateQueries("products"),t("/admin/products")},onError:function(e){x.Am.error(e.body.message)}});if(oe.isLoading||le.isLoading||!e)return(0,v.jsx)("div",{children:"Loading..."});var de=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var r,n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Promise.all(se.map(function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.QF)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:r=e.sent,n=[].concat((0,a.Z)(te),(0,a.Z)(r)),i=X.find((function(e){return e.title===M})),ie.mutate({title:N,brand:C,detail:U,price:O,category:null===i||void 0===i?void 0:i.id,condition:B,stock:T,images:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{className:"w-full text-2xl font-medium",children:"Update Product"}),(0,v.jsx)("div",{className:"flex py-3 ",children:(0,v.jsxs)(m.rU,{to:"/admin/products",className:"flex place-items-center  gap-x-2",children:[(0,v.jsx)(l.PSe,{className:"text-xl"}),"Go Back"]})}),(0,v.jsxs)("form",{className:"information flex w-full flex-col gap-y-4 py-4 text-lg text-gray-700 ",onSubmit:de,children:[(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"name",className:"text-lg",children:"Name"}),(0,v.jsx)(b.Z,{name:"name",type:"text",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:N,onChange:function(e){return Z(e.target.value)},required:!0})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"brand",className:"text-lg",children:"Brand"}),(0,v.jsx)(b.Z,{name:"brand",type:"text",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:C,onChange:function(e){return P(e.target.value)},required:!0})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("label",{htmlFor:"address",className:"text-lg",children:"Product Detail"}),(0,v.jsx)("textarea",{"aria-label":"Address",className:"mt-1 mb-2 w-full border-2 border-gray-400 p-4 outline-none",rows:4,value:U,onChange:function(e){return L(e.target.value)},required:!0}),(0,v.jsxs)("div",{className:"flex flex-wrap place-content-between gap-x-4",children:[(0,v.jsxs)("div",{className:"w-full min-w-[10rem] flex-1",children:[(0,v.jsx)("div",{className:"mb-1 text-lg",children:"Price"}),(0,v.jsx)(b.Z,{name:"price",type:"number",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:O.toString(),onChange:function(e){return z(Number(e.target.value))},required:!0})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("div",{className:"mb-2 text-lg",children:"Category Type"}),(0,v.jsx)(f.Z,{selected:M,setSelected:Q,width:"w-64",border:"border-2 border-gray-400",options:X.map((function(e){return e.title}))})]}),(0,v.jsxs)("div",{className:"",children:[(0,v.jsx)("div",{className:"mb-2 text-lg",children:"Condition"}),(0,v.jsx)(f.Z,{selected:B,setSelected:W,width:"w-64",border:"border-2 border-gray-400",options:["new","used"]})]})]}),(0,v.jsx)("div",{className:"my-4 flex flex-wrap gap-x-4",children:T.map((function(e){return(0,v.jsxs)("div",{className:"min-w-[10rem] flex-1",children:[(0,v.jsxs)("label",{htmlFor:"stock",className:"text-lg",children:["Size ",e.size]}),(0,v.jsx)(b.Z,{name:"stock",type:"text",extraClass:"w-full mt-1 mb-2",border:"border-2 border-gray-400",value:e.quantity.toString(),onChange:function(t){return J((function(r){return r.map((function(r){return r.size===e.size?(0,n.Z)((0,n.Z)({},r),{},{quantity:Number(t.target.value)}):r}))}))},required:!0})]},e.size)}))})]}),(0,v.jsx)("div",{className:" border-2 border-gray-400 p-4",children:(0,v.jsx)(j.Z,{initialImages:te,setImages:re,files:se,setFiles:ce})}),(0,v.jsxs)("div",{className:"mt-8 flex place-content-between",children:[(0,v.jsx)("button",{type:"button",onClick:function(){return ue.mutate(e)},className:"mb-4 w-52 border border-gray-500 py-3 px-6 text-center text-xl hover:bg-gray-500  hover:text-gray-100 sm:py-2 sm:text-base","aria-label":"Delete Product",children:"Delete Product"}),(0,v.jsx)(g.Z,{type:"submit",value:"Update Product",extraClass:"w-52 text-center text-xl mb-4",size:"lg"})]})]})]})}}}]);
//# sourceMappingURL=945.ad25a887.chunk.js.map